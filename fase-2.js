var x;

var a;
var p;

var lfs

var b

var c
var y

var h 
var e

var p1
var p2

var h1;
var c1;

var t

var g

t = "  "
g = t

p1 = 0
p2 = 0

h = 29;
c = 15;

y = h
e = c

lfs = 3;

b = 0;

x = Array(32);

a = Array(17);
p = Array(17);

a[0] = 18; a[1] = 19; a[2] = 21; a[3] = 28; a[4] = 9; a[5] = 14; a[6] = 20; a[7] =  5; a[8] =  5; a[9] = 2; a[10] = 13; a[11] = 22; a[12] = 23; a[13] = 15;
p[0] = 13; p[1] =  5; p[2] =  3; p[3] = 19; p[4] = 4; p[5] = 29; p[6] = 27; p[7] = 27; p[8] = 21; p[9] = 7; p[10] = 18; p[11] =  8; p[12] = 18; p[13] = 17;

x[0] =  [" *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"] 
x[1] =  [" *"," K"," +"," +"," +"," +"," +"," *"," *","  ","  ","  ","  ","  "," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"] 
x[2] =  [" *"," +"," +"," +"," +"," +"," +"," D"," #","  ","  ","  ","  ","  "," *","  ","  ","  ","  ","  ","  ","  ","  "," +"," <","  "," +"," <"," +","  "," *"," *"] 
x[3] =  [" *"," *"," *"," *"," V"," V"," *"," *"," *","  ","  ","  "," #","  "," *","  "," *"," *"," *"," *"," *"," *","  "," #"," #"," K"," #"," *"," #","  "," *"," *"] 
x[4] =  [" *"," *"," *"," #","  ","  "," #"," *"," *"," ^"," *"," ^"," *","  ","  ","  "," *"," O","  "," *"," #"," *","  "," *"," +","  "," *"," *"," *","  "," *"," *"] 
x[5] =  [" *"," *"," *"," *","  ","  "," *"," *","  ","  "," #","  ","  "," #"," *","  "," *"," O"," O","  "," <"," D","  ","  "," #"," *"," #"," D"," +","  "," *"," *"] 
x[6] =  [" *"," *"," #"," *"," V"," V"," *"," #","  "," *"," #"," ^"," ^"," #"," *"," *"," *"," O"," *"," *"," #"," *","  ","  "," +","  ","  ","  "," *","  "," *"," *"] 
x[7] =  [" *"," *"," #"," #","  ","  ","  ","  ","  "," *"," *","  ","  "," *","  ","  "," *","  "," *"," *"," *"," *"," *"," *"," *"," *","  "," *"," *"," *"," *"," *"] 
x[8] =  [" *"," *"," #"," *"," *"," *"," *"," *"," *"," *","  ","  ","  "," #","  ","  "," *"," V"," #"," *"," #"," *"," *"," *"," *"," *","  "," *"," K"," *"," *"," *"] 
x[9] =  [" *"," *"," #"," K"," D"," >","  ","  "," *","  ","  ","  ","  "," #"," K","  "," *","  "," #"," *","  ","  ","  "," #"," *"," *","  "," *","  "," +"," *"," *"] 
x[10] = [" *"," *"," #","  "," *"," *","  "," #"," *"," *"," ^"," *","  "," #","  ","  "," *","  "," #"," *","  "," #","  "," *","  "," >","  "," *"," +"," +"," *"," *"] 
x[11] = [" *"," *"," #"," #"," *"," *"," V"," *"," *"," *","  "," *"," *"," *"," *"," ^"," *","  "," *"," *","  "," #","  "," *"," ^"," *","  "," *"," +"," +"," *"," *"]
x[12] = [" *"," *"," #"," O"," #"," *","  ","  ","  ","  ","  ","  "," O"," #"," #","  ","  ","  "," *","  ","  "," #","  "," *","  "," #"," +"," *"," +"," +"," *"," *"] 
x[13] = [" *"," *"," #"," #"," O"," *","  ","  ","  ","  ","  ","  "," #"," #"," O","  ","  ","  "," D","  "," #"," O","  "," *","  "," #"," +"," +"," +","  "," *"," *"] 
x[14] = [" *"," *"," O"," #"," #"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," #"," V"," V"," *","  "," #"," #"," *"," *"," D"," *"," *"] 
x[15] = [" *"," *"," #"," O"," #"," *","  ","  "," K","  ","  "," *","  "," +","  "," +","  "," D","  ","  "," *","  ","  "," *","  "," *"," *"," *"," O","  "," *"," *"] 
x[16] = [" *"," *"," O"," #"," #"," *"," +"," *"," +"," *"," +"," *"," +"," *"," *"," *"," *"," *"," *"," F"," *","  "," #"," *","  "," #","  ","  ","  ","  "," *"," *"] 
x[17] = [" *"," *"," *","  "," *"," *","  ","  "," +","  ","  ","  ","  "," *"," #"," #"," #"," #"," *"," *"," *","  "," #"," *","  "," #","  ","  ","  ","  "," *"," *"] 
x[18] = [" *"," *","  ","  ","  "," *","  "," #"," #"," #","  ","  ","  "," D","  ","  ","  "," +"," <"," K"," *","  ","  "," *"," ^"," *"," *"," *"," #"," #"," *"," *"] 
x[19] = [" *"," *","  ","  ","  "," D","  "," #"," K"," #"," #","  "," #"," *"," #","  ","  ","  "," *","  "," *"," #","  "," *","  ","  "," *"," *","  ","  "," *"," *"] 
x[20] = [" *"," *","  ","  ","  "," *","  "," #","  "," #","  ","  ","  "," *"," #","  ","  "," #"," *","  "," +"," O"," +"," *"," K","  "," <"," D","  ","  "," *"," *"] 
x[21] = [" *"," *"," *"," D"," *"," *","  ","  ","  ","  ","  "," #"," #"," *","  ","  ","  ","  "," *"," #"," #"," #"," #"," *","  ","  "," *"," *","  ","  "," *"," *"] 
x[22] = [" *"," *"," +"," +"," +"," *"," #"," *"," D"," *"," #"," *"," *"," *","  "," +"," +","  "," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *","  "," *"," *"] 
x[23] = [" *"," *"," +"," K"," +"," *"," O","  ","  ","  ","  "," *","  "," +","  "," +"," +","  "," D"," +","  ","  ","  "," *"," +"," +","  ","  ","  ","  ","  "," *"] 
x[24] = [" *"," *"," +","  "," +"," *"," *"," *"," V"," *"," *"," *","  "," *","  ","  ","  ","  "," *","  ","  "," K","  "," *"," +"," +"," #"," #"," #","  ","  "," *"] 
x[25] = [" *"," *"," *"," V"," *"," *","  "," +","  ","  ","  ","  ","  "," *"," #"," ^"," ^"," #"," *","  ","  ","  ","  "," *","  "," #"," #"," #"," #"," #","  "," *"] 
x[26] = [" *","  ","  ","  ","  ","  ","  "," *"," #"," *"," *"," *"," *"," *"," *","  ","  "," *"," *"," *","  ","  ","  "," *","  "," #"," +"," K"," #"," #","  "," *"] 
x[27] = [" *","  "," *"," *"," *"," *"," *"," *","  "," *"," K"," #"," *"," *"," C","  ","  ","  "," *"," *","  ","  ","  "," *","  "," #","  "," +"," #"," #","  "," *"] 
x[28] = [" *","  "," *"," O"," #","  "," *","  ","  "," >","  ","  ","  "," >","  ","  ","  ","  "," #"," D"," +"," K"," +"," *"," +"," +","  "," #"," #"," +"," +"," *"] 
x[29] = [" *","  ","  ","  "," *","  ","  ","  "," *"," *","  "," #"," *"," *","  ","  ","  ","  ","  "," <"," +","  "," +"," *"," +"," +","  ","  ","  "," +"," +"," *"] 
x[30] = [" *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," #","  ","  ","  "," C"," #","  ","  ","  "," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"] 
x[31] = [" *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"] 
 //     | 0  | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 | 30 | 31 |
x[h][c] = " &";

document.getElementById("1").innerHTML = "";
  
  for(o = 0; o < x.length; o++){
    for(i = 0; i < x[o].length; i++){
        document.getElementById("1").innerHTML += x[o][i]
    }
    document.getElementById("1").innerHTML += `<br>`
    }


//================

function reset(params) {
  document.getElementById("1").innerHTML = "";

for(o = 0; o < x.length; o++){
  for(i = 0; i < x[o].length; i++){
      document.getElementById("1").innerHTML += x[o][i]
  }
  document.getElementById("1").innerHTML += `<br>`
  }
}

function espinho(params) {
    h = y;
    c = e;
    t = "  ";
  
    lfs -= 1;
    document.getElementById('life').innerHTML = "";
  
    for(i = 0; i < lfs; i++){
      document.getElementById('life').innerHTML += "♡ "
    }
  
    if(lfs == 0){
      window.close();
      window.open('atum.html')
    }else{

    }
    
  }
  
  function botaum(params) {
    if(b == 0){
      x[2][8] = "  ";
      x[7][17] = " #"
      x[8][13] =  "  "
      x[9][13] =  "  ";
      x[10][13] = "  ";
      x[11][2] = "  "; x[11][3] = "  "; x[11][10] = " #"; x[11][17] = " #";
      x[11][20] = " #"; x[11][22] = " #"; 
      x[12][2] = "  "; x[12][4] = "  ";
      x[13][2] = "  "; x[13][3] = "  ";
      x[14][3] = "  "; x[14][4] = "  ";
      x[15][2] = "  "; x[15][4] = "  "; x[15][22] = "  "; x[15][21] = " #"; 
      x[16][3] = "  "; x[16][4] = "  ";
      x[18][28] = "  "; x[18][29] = "  ";
      x[20][8] = " #";
      x[23][17] = " #";
      x[26][8] = " #";
      x[27][20] = " #"; x[27][21] = " #"; x[27][22] = " #";
      x[28][4] = "  "; x[28][18] = "  ";
      x[30][19] = " #"; x[30][20] = " #"; x[30][21] = " #";
    document.getElementById("1").style.color = "#FF0000";
    b = 1;
    }else if(b == 1){
      x[2][8] = " #";
      x[7][17] = "  ";
      x[8][13] =  " #";
      x[9][13] =  " #";
      x[10][13] = " #";
      x[11][2] = " #"; x[11][3] = " #"; x[11][10] = "  "; x[11][17] = "  "; 
      x[11][20] = "  "; x[11][22] ="  "; 
      x[12][2] = " #"; x[12][4] = " #";
      x[13][2] = " #"; x[13][3] = " #";
      x[14][3] = " #"; x[14][4] = " #";
      x[15][2] = " #"; x[15][4] = " #"; x[15][22] = " #"; x[15][21] = "  ";
      x[16][3] = " #"; x[16][4] = " #";
      x[18][28] = " #"; x[18][29] = " #";
      x[20][8] = "  ";
      x[23][17] = "  ";
      x[26][8] = " V";
      x[27][20] = "  "; x[27][21] = "  "; x[27][22] = "  ";
      x[28][4] = " #"; x[28][18] = " #";
      x[30][19] = "  "; x[30][20] = "  "; x[30][21] = "  ";
    document.getElementById("1").style.color = "rgb(42, 190, 42)";
    b = 0;
    }
  }

  function portas(params) {

    if(x[h-1][c] == " D"){
        h1 = h-1;
        c1 = c;
    }
    else if (x[h+1][c] == " D") {
       h1 = h + 1;
       c1 = c;
    }
    else if (x[h][c-1]  == " D") {
       h1 = h;
       c1 = c-1;
    }
    else if (x[h][c+1] == " D") {
        h1 = h;
        c1 = c+1;
    }

    for(o = 0; o < p2; o++){
        if(h1 == a[o] && c1 == p[o]){
            x[h1][c1] = " ="
            reset();
        }
    }
}
  
  document.addEventListener("keyup", function(event) {
  
    if(event.key == "m") {
      window.close()
      window.open('index.html')
    }
  
    if (event.key == "w") {
      if(x[h-1][c] == " *" || x[h-1][c] == " V")
      {
   
      }
      else if(x[h-1][c] == " D"){
  
      }
      else
      {
        p1 = 1;
  
        x[h][c] = t;
        t = x[h-1][c]
  
        if(t == " O"){
          botaum();
        }
  
        if(t == " F"){
          window.close();
          window.open('index.html');
        }
  
        if(t == " #")
        {
        espinho();
        }else{
          h -= 1
        }
        if(t == " +"){
          t = " #"
        }
        
        if(t == " C"){
          x[30][17] = x[h][c]
          
        }
       
        x[h][c] = " &"
       
       reset();
       

  
  }


    }
  
    if(event.key == "s") {
      if(x[h+1][c] == " *" || x[h+1][c] == " ^" || x[h+1][c] == " <"){
  
      }
      else if (x[h+1][c] == " D") {
        
      }
      else
      {
        p1 = 2;
  
        x[h][c] = t;
        t = x[h+1][c]

        if(t == " F"){
          window.close();
          window.open('index.html')
        }

        if(t == " O"){
          botaum();
        }

        if(t == " #")
        {
          espinho();
        }else{
          h += 1
        }
        if(t == " +"){
          t = " #"
        }
  
        x[h][c] = " &"
  
        reset();
  
  }
    }
  
    if(event.key == "a") {
      if(x[h][c-1] == " *" || x[h][c-1] == " >"){
  
      }
      else if (x[h][c-1] == " D") {
        
      }
      else
      {
        p1 = 3;
  
      x[h][c] = t;
      t = x[h][c-1]  

      if(t == " O"){
        botaum();
      }

      if(t == " #")
        {
          espinho();
        }else{
          c -= 1
        }
        if(t == " +"){
          t = " #"
        }
  
       x[h][c] = " &"
      
       reset();
  
  }
  
    }
  
    if(event.key == "d") {
      if(x[h][c+1] == " *" || x[h][c+1] == " <"){
  
      }
      else if (x[h][c+1] == " D") {
        
      }
      else{
        p1 = 4;
  
      x[h][c] = t;
      t = x[h][c+1] 

      if(t == " O"){
        botaum();
      }

      if(t == " @"){
        alert("porta final aberta")
        t = "  "
        x[0][8] = " ^"
      }
  
      if(t == " #")
        {
          espinho();
        }else{
          c += 1
        }
        if(t == " +"){
          t = " #"
        }
  
       x[h][c] = " &"
  
       reset();
  
  }
    }
  
    if(event.key == "q"){
      
      switch (p1) {
        case 1:
          {x[h][c] = " ∞";
          p1 = 3;}
          break;
        
        case 2:
          {x[h][c] = " ∞";
          p1 = 4;}
          break;
  
        case 3:
          {x[h][c] = " &";
          p1 = 2;}
          break;  
  
        case 4:
            {x[h][c] = " &";
            p1 = 1;}
            break; 
  
      }
  
      reset();
      
    }
  
    if(event.key == "i"){
      portas();

      if(x[h-1][c] == " K"){
          p2 += 1
          x[h-1][c] = "  ";
          reset();
        }

  }

 
  
  })