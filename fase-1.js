var x;

var a;
var p;

var lfs

var b

var c
var y

var h 
var e

var p1
var p2

var h1;
var c1;

var t

var g

t = "  "
g = t

p1 = 0
p2 = 0

h = 13;
c = 8;

y = h
e = c

lfs = 3;

b = 0;

x = Array(17);

a = Array(5);
p = Array(5);

a[0] = 10; a[1] = 10; a[2] = 9; a[3] = 9; a[4] = 3;
p[0] = 11; p[1] = 5; p[2] = 14; p[3] = 3; p[4] = 6;

x[0]  = [" *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"];
x[1]  = [" *"," *"," *","  ","  ","  "," *","  "," K","  "," *","  ","  ","  "," *"," *"," *"];
x[2]  = [" *"," *"," *","  "," @","  "," *","  ","  ","  ","  ","  ","  ","  "," *"," *"," *"];
x[3]  = [" *","  ","  ","  ","  ","  "," D","  ","  ","  ","  ","  ","  ","  ","  ","  "," *"];
x[4]  = [" *","  ","  ","  ","  ","  "," *","  ","  ","  ","  ","  ","  ","  ","  ","  "," *"];
x[5]  = [" *"," *"," v"," *"," *"," *"," *"," *"," *"," *","  "," *","  ","  "," *"," *"," *"];
x[6]  = [" *","  ","  ","  ","  ","  "," *"," *"," *"," *","  "," *","  ","  ","  ","  "," *"];
x[7]  = [" *","  ","  ","  ","  "," K"," *"," *"," ^"," *","  "," *","  ","  ","  ","  "," *"];
x[8]  = [" *","  ","  ","  ","  ","  "," *","  ","  "," *","  "," *","  ","  ","  ","  "," *"];
x[9]  = [" *"," *"," *"," D"," *"," *"," *"," *"," D"," *"," v"," *"," *"," *"," D"," *"," *"];
x[10] = [" *","  ","  ","  ","  "," D","  ","  ","  ","  ","  "," D","  ","  ","  ","  "," *"];
x[11] = [" *","  ","  "," K","  "," *","  ","  "," K","  ","  "," *","  ","  ","  ","  "," *"];
x[12] = [" *","  ","  ","  ","  "," *"," *","  ","  ","  "," *"," *","  ","  "," K","  "," *"];
x[13] = [" *","  ","  ","  ","  "," *","  ","  ","  ","  ","  "," *","  ","  ","  ","  "," *"];
x[14] = [" *"," *"," *"," *"," *"," *"," *","  ","  ","  "," *"," *"," *"," *"," *"," *"," *"];
x[15] = [" *"," *"," *"," *"," *"," *","  ","  ","  ","  ","  "," *"," *"," *"," *"," *"," *"];
x[16] = [" *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"," *"];
//      | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 | 11 | 12 | 13 | 14 | 15 | 16 |

 x[h][c] = " &"

    document.getElementById("1").innerHTML = "";
  
  for(o = 0; o < x.length; o++){
    for(i = 0; i < x[o].length; i++){
        document.getElementById("1").innerHTML += x[o][i]
    }
    document.getElementById("1").innerHTML += `<br>`
    }

//=========================================

function reset(params) {
  document.getElementById("1").innerHTML = "";

for(o = 0; o < x.length; o++){
  for(i = 0; i < x[o].length; i++){
      document.getElementById("1").innerHTML += x[o][i]
  }
  document.getElementById("1").innerHTML += `<br>`
  }
}

    function portas(params) {

        if(x[h-1][c] == " D"){
            h1 = h-1;
            c1 = c;
        }
        else if (x[h+1][c] == " D") {
           h1 = h + 1;
           c1 = c;
        }
        else if (x[h][c-1]  == " D") {
           h1 = h;
           c1 = c-1;
        }
        else if (x[h][c+1] == " D") {
            h1 = h;
            c1 = c+1;
        }

        for(o = 0; o < p2; o++){
            if(h1 == a[o] && c1 == p[o]){
                x[h1][c1] = " ="
                reset();
            }
        }
    }

//===================================================

document.addEventListener("keyup", function(event) {

    if(event.key == "i"){
        portas();

        if(x[h-1][c] == " K"){
            p2 += 1
            x[h-1][c] = "  ";
            reset();
          }

    }

    if(event.key == "m") {
      window.close()
      window.open('index.html')
    }
  
    if (event.key == "w") {
      if(x[h-1][c] == " *" || x[h][c+1] == " v")
      {
   
      }
      else if(x[h-1][c] == " D"){
  
      }
      else
      {
        p1 = 1;
  
        x[h][c] = t;
        t = x[h-1][c]

        if(t == " @"){
            t = "  "
            x[9][8] = " ="
          }
  
        if(t == " ^"){
          window.close();
          window.open('fase-2.html');
        }
         
        h -= 1 
       
        x[h][c] = " &"
       
       reset();
  
  }
    }
  
    if(event.key == "s") {
      if(x[h+1][c] == " *"){
  
      }
      else if(x[h+1][c] == " D"){

      }
      else
      {
        p1 = 2;
  
        x[h][c] = t;
        t = x[h+1][c]

        if(t == " @"){
            t = "  "
            x[9][8] = " ="
          }

          h += 1
  
        x[h][c] = " &"
  
        reset();
  
  }
    }
  
    if(event.key == "a") {
      if(x[h][c-1] == " *" || x[h][c-1] == " v"){
  
      }
      else if(x[h][c-1] == " D"){

      }
      else
      {
        p1 = 3;
  
      x[h][c] = t;
      t = x[h][c-1]  

      if(t == " @"){
        t = "  "
        x[9][8] = " ="
      }

        c -= 1
       x[h][c] = " &"
      
       reset();
  
  }
    }
  
    if(event.key == "d") {
      if(x[h][c+1] == " *" || x[h][c+1] == " v"){
  
      }
      else if(x[h][c+1] == " D"){

      }
      else{
        p1 = 4;
  
      x[h][c] = t;
      t = x[h][c+1] 
  
      if(t == " @"){
        t = "  "
        x[9][8] = " ="
      }

          c += 1
        
       x[h][c] = " &"
  
       reset();
  
  }
    }

    if (event.key == "m") {
      window.close();
      window.open('fase-2.html');
    }
})
